<contentbox class="full-max-width id-acmg-container" title="ACMG" >
  <cbbody>
    <section class="line-wrapper spaced">
      <div class="ref-title tabular-row">
        <div class="cell"><h5>Suggested class: </h5></div>
        <div class="cell"><p>{{vm.getSuggestedClassification()}}</p></div>
      </div>
      <div ng-if="vm.isEditable()" class="id-acmg-show-hide-req">
        <checkable-button buttonclass="blue"
                          check-model="vm.show_req">
          <checked>Hide REQ</checked>
          Show REQ ({{vm.getREQCodeCount()}})
        </checkable-button>
        <button class="blue id-add-acmg" uib-popover-template="vm.popover.templateUrl"
          popover-append-to-body="true"
          popover-title="Add ACMG code"
          popover-trigger="outsideClick"
          popover-placement="left"
          ng-if="vm.isEditable() && !vm.readOnly"
        >Add code
        </button>
      </div>
    </section>

    <!-- Included codes -->
    <!-- Don't use 'track by $index' -->
    <h4 class="section-title acmg-body">ACMG Included</h4>
    <section class="acmg-wrapper included id-acmg-included">
      <acmg directreqs="true"
            code="code"
            ng-repeat="code in vm.getAlleleAssessment().evaluation.acmg.included"
            on-toggle="vm.excludeACMG(code)"
            toggle-text="-"
            comment-model="code.comment"
            editable="vm.isEditable() && !vm.readOnly">
      </acmg>
    </section>

    <!-- Suggested codes (sans REQ) -->
    <!-- Don't use 'track by $index' -->
    <div ng-if="vm.isEditable()">
        <h4 class="section-title acmg-body">ACMG Suggested</h4>
        <section class="acmg-wrapper id-acmg-suggested">
          <acmg code="code"
                ng-repeat="code in vm.getAlleleAssessment().evaluation.acmg.suggested"
                on-toggle="vm.includeACMG(code)"
                toggle-text="+"
                comment-model="code.comment"
                ng-if="::vm.isIncludable(code.code)"
                editable="vm.isEditable() && !vm.readOnly"
          ></acmg>
        </section>
    </div>

    <!-- REQ codes -->
    <!-- Don't use 'track by $index' -->
    <h4 class="section-title acmg-body" ng-if="vm.show_req">ACMG Suggested REQ</h4>
    <section class="acmg-wrapper id-acmg-suggested-req" ng-if="vm.show_req">
      <acmg code="group"
            ng-repeat="group in vm.req_groups"
            ng-if="vm.show_req"
            add-required-for-code="vm.addACMGCode(code)"
            editable="vm.isEditable() && !vm.readOnly"></acmg>
    </section>

  </cbbody>
</contentbox>


