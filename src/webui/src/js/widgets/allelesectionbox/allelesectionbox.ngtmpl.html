<sectionbox color="purple" collapsed="vm.section.options.collapsed">
<maintitle>
  {{vm.header}}
</maintitle>
<controls>

    <!-- Controls -->
    <section class="line-wrapper" ng-if=vm.controls.length>
      <div class="button" ng-repeat="control in vm.controls">

        <button class="id-igv" ng-if="control == 'igv'" ng-click="vm.showIgv()">Show in IGV</button>
        <button class="id-copy-alamut" ng-if="control == 'copy_alamut'" ng-click="vm.copyAlamut()">Copy to alamut</button>
        <button class="id-classification-outdated" ng-if="control == 'reuse_classification' && vm.isAlleleAssessmentOutdated()" disabled>Classification outdated</button>
        <checkable-button class="id-accept-classification" ng-if="control == 'reuse_classification' && vm.hasExistingAlleleAssessment() && !vm.isAlleleAssessmentOutdated()" show-mark="true" check-model="vm.isAlleleAssessmentReused()" ng-click="vm.toggleReuseAlleleAssessment()" one-way="true">
          Use existing
          <checked>Existing reused</checked>
        </checkable-button>
        <button class="id-mark-technical" ng-if="control == 'toggle_technical'" ng-click="vm.setTechnical()">
          Mark technical
        </button>
        <button class="id-mark-class1" ng-if="control == 'toggle_class1'" ng-click="vm.setClass1()">
          Mark class 1
        </button>
        <button class="id-mark-class2" ng-if="control == 'toggle_class2'" ng-click="vm.setClass2()">
          Mark class 2
        </button>
        <button class="id-add-references" ng-click="vm.showAddReferenceModal()" ng-if="control == 'references'">Add references</button>
        <button class="id-add-external" ng-if="control == 'custom_external'" ng-click="vm.showCustomAnnotationModal('external')">Add external DB</button>
        <button class="id-add-prediction" ng-if="control == 'custom_prediction'" ng-click="vm.showCustomAnnotationModal('prediction')">Add prediction</button>
        <button ng-if="control == 'add_reference'" ng-click="vm.showAddReferenceModal()">Add reference</button>
        <button class="id-goto-next" ng-if="control == 'skip_next'" ng-click="vm.onSkip()">Go to next</button>

        <section class="line-wrapper" ng-if="control == 'classification'">
          <div class="dropdown">
            <select class="id-select-classification" ng-disabled="vm.isAlleleAssessmentReused()" ng-model="vm.getAlleleAssessment().classification" ng-options="o.value as o.name for o in vm.classificationOptions" ng-change="vm.changeClassification()"></select>
          </div>
        </section>
      </div>
    </section>



</controls>

<!-- Comments -->
<top class="comments">
  <autosize-textarea class="control-comment" ng-disabled="!vm.isEditable()" placeholder="{{vm.alleleassessmentComment.placeholder}}" ng-model="vm.getAlleleAssessment().evaluation[vm.alleleassessmentComment.name].comment" ng-if="vm.alleleassessmentComment"></autosize-textarea>
  <autosize-textarea class="control-comment" ng-disabled="!vm.isEditable()" placeholder="{{vm.allelereportComment.placeholder}}" ng-model="vm.getAlleleReport().evaluation[vm.allelereportComment.name].comment" ng-if="vm.allelereportComment"></autosize-textarea>
</top>

<contentwrapper>
    <allele-sectionbox-content
      class="sectionbox-content"
      analysis="vm.analysis"
      allele="vm.allele"
      references="vm.references"
      allele-state="vm.alleleState"
      boxes="vm.section.content"
      boxes-options="vm.sectionOptions"
      on-save="vm.onUpdate()"
    ></allele-sectionbox-content>
</contentwrapper>
</sectionbox>
