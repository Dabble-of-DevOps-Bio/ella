<sectionbox class="prompt" color="purple" modal="true" on-close="($ctrl.close)">
    <maintitle>
        <h3 class="title">Classification history</h3>
    </maintitle>
    <controls>
        <section class="line-wrapper pinned-right">
            <button class="id-cancel" type="button" ng-click="$ctrl.close()">Close</button>
        </section>
    </controls>
    <contentwrapper>
        <div class="allele-assessment-history" ng-if="$ctrl.alleleAssessments">
            <div class="classification-summary">
                <h4 class="section-header">Summary</h4>
                <ul>
                    <li ng-repeat="aa in $ctrl.alleleAssessments track by aa.id">
                        <span class="date">{{ $ctrl.formatDate(aa) }}</span
                        >: <span class="classification">Class {{ aa.classification }}</span>
                        <span class="details"
                            >by {{ aa.user.full_name }} on {{ aa.genepanel_name }}_{{
                                aa.genepanel_version
                            }}</span
                        >
                    </li>
                </ul>
            </div>
            <div class="full-view">
                <h4 class="section-header">Details</h4>
                <div class="controls">
                    <div class="dropdown">
                        <select
                            ng-model="$ctrl.modelSelectedAlleleAssessment"
                            ng-model-watch="$ctrl.selectedAlleleAssessment"
                            ng-options="aa as $ctrl.formatAlleleAssessment(aa) for aa in $ctrl.alleleAssessments"
                            ng-change="$ctrl.selectedAlleleAssessmentChanged({selectedAlleleAssessment: $ctrl.modelSelectedAlleleAssessment})"
                        >
                        </select>
                    </div>
                </div>
                <div class="classification-details">
                    <span class="title">Evaluation</span>
                    <wysiwyg-editor
                        class="id-existing-comment-classification"
                        ng-disabled="true"
                        ng-model="$ctrl.selectedAlleleAssessment.evaluation.classification.comment"
                    >
                    </wysiwyg-editor>

                    <span class="title">Attachments</span>
                    <attachment
                        ng-repeat="at in $ctrl.selectedAlleleAssessment.attachment_ids"
                        attachment-path="'views.workflows.modals.alleleAssessmentHistory.data.attachments.' + at"
                        read-only="true"
                    ></attachment>

                    <span class="title">ACMG</span>

                    <acmg
                        class="included disabled"
                        code="code"
                        ng-repeat="code in $ctrl.selectedAlleleAssessment.evaluation.acmg.included track by $index"
                        comment-model="code.comment"
                        editable="false"
                    ></acmg>

                    <span class="title">Frequency</span>
                    <wysiwyg-editor
                        class="id-existing-comment-frequency"
                        ng-disabled="true"
                        ng-model="$ctrl.selectedAlleleAssessment.evaluation.frequency.comment"
                    >
                    </wysiwyg-editor>
                    <span class="title">External</span>
                    <wysiwyg-editor
                        class="id-existing-comment-external"
                        ng-disabled="true"
                        ng-model="$ctrl.selectedAlleleAssessment.evaluation.external.comment"
                    >
                    </wysiwyg-editor>
                    <span class="title">Prediction</span>
                    <wysiwyg-editor
                        class="id-existing-comment-prediction"
                        ng-disabled="true"
                        ng-model="$ctrl.selectedAlleleAssessment.evaluation.prediction.comment"
                    >
                    </wysiwyg-editor>
                    <span class="title">Reference</span>
                    <wysiwyg-editor
                        class="id-existing-comment-reference"
                        ng-disabled="true"
                        ng-model="$ctrl.selectedAlleleAssessment.evaluation.reference.comment"
                    >
                    </wysiwyg-editor>
                </div>
            </div>
        </div>
    </contentwrapper>
</sectionbox>
