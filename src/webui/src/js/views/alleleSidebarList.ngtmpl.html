<h4 class="section-title">{{$ctrl.title}}</h4>
  <section>
    <div class="nav-table">
      <div class="nav-row top" ng-if="$ctrl.alleles.length">
        <div ng-if="$ctrl.expanded" class="cell"></div> <!-- Header for selected colorbox when expanded -->
        <div class="cell" title="Sample type" ng-if="$ctrl.isMultipleSampleType" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'type'})">
          T
          <span ng-if="$ctrl.orderBy.key === 'type'">
            <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
            <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
          </span>
        </div>
        <div class="cell" title="Inheritance" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'inheritance'})">
          INH
          <span ng-if="$ctrl.orderBy.key === 'inheritance'">
            <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
            <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
          </span>
        </div>
        <div class="cell" title="Gene" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'gene'})">
          GENE
          <span ng-if="$ctrl.orderBy.key === 'gene'">
            <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
            <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
          </span>
        </div>
        <div class="cell" title="HGVSc" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'hgvsc'})">
          HGVSc
          <span ng-if="$ctrl.orderBy.key === 'hgvsc'">
            <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
            <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
          </span>
        </div>
        <div class="cell" title="Consequence" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'consequence'})">
          CSQ
          <span ng-if="$ctrl.orderBy.key === 'consequence'">
            <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
            <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
          </span>
        </div>
        <div class="cell indicators">
          <div title="Family filter" class="top">
            <div class="hit" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'family'})">
              <span>F</span>
              <span ng-if="$ctrl.orderBy.key === 'family'">
                <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
                <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
              </span>
            </div>
          </div>
          <div title="Homozygous" class="top">
            <div class="hit" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'homozygous'})">
              <span>O</span>
              <span ng-if="$ctrl.orderBy.key === 'homozygous'">
                <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
                <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
              </span>
            </div>
          </div>
          <div title="Quality issues" class="top">
            <div class="hit" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'quality'})">
              <span>Q</span>
              <div ng-if="$ctrl.orderBy.key === 'quality'">
                <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
                <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
              </div>
            </div>
          </div>
          <div title="Reference(s) available" class="top">
            <div class="hit" ng-click="$ctrl.orderByChanged({section: $ctrl.section, key: 'references'})">
              <span>R</span>
              <div ng-if="$ctrl.orderBy.key === 'references'">
                <span ng-if="$ctrl.orderBy.reverse">&#8593;</span>
                <span ng-if="!$ctrl.orderBy.reverse">&#8595;</span>
              </div>
            </div>
          </div>
        </div>
        <div class="cell"></div>
        <div ng-if="!$ctrl.expanded" class="cell"></div> <!-- Header for selected colorbox when not expanded -->
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 7rem;" title="Read depth">DP</div>
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 7rem;" title="Allele ratio">RATIO</div>
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 7rem;" title="Highest frequency">HI. FREQ</div>
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 10rem;" title="Highest allele count">HI. COUNT</div>
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 10rem;" title="External databases">EXTERNAL</div>
        <div ng-if="$ctrl.expanded" class="cell" style="min-width: 20rem;" title="Evaluation">EVALUATION</div>
        <div ng-if="$ctrl.expanded" class="cell" title="Classification">QUICK CLASSIFICATION</div>
      </div>
      <div class="nav-row spacer"></div>
      <div class="nav-row allele" ng-repeat="allele in $ctrl.alleles track by allele.id" title="Allele ID {{ allele.id }}"
            ng-class="{'active': $ctrl.selectedAllele.id == allele.id || $ctrl.isToggled[allele.id], 'toggled': $ctrl.isToggled[allele.id], 'togglable': $ctrl.isTogglable[allele.id], 'multiple': $ctrl.isMultipleInGene[allele.id], 'technical': $ctrl.isTechnical(allele.id)}">
        <div ng-if="$ctrl.expanded" class="cell tab"
          title="{{$ctrl.isTogglable[allele.id] && $ctrl.readOnly ? 'Not allowed (read-only)' : ''}}"></div>
        <div title="{{$ctrl.getSampleTypesFull(allele)}}" ng-if="$ctrl.isMultipleSampleType" class="cell sample-type id-sample-type">
          {{$ctrl.getSampleType(allele)}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" title="Inheritance" class="cell inheritance id-inheritance">
            {{allele.formatted.inheritance}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" class="cell gene id-gene">
            {{allele.annotation.filtered[0].symbol}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" class="cell hgvsc id-hgvsc">
            {{allele.annotation.filtered[0].HGVSc_short || allele.formatted.hgvsg}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" class="cell consequence id-consequence" ng-class="{'hit': $ctrl.isNonsense[allele.id] && !$ctrl.isTechnical(allele.id)}">
            {{$ctrl.consequence[allele.id]}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" class="cell indicators id-indicators">
            <div title="{{$ctrl.getFamilyLabel(allele)}}" class="family">
              <div class="hit" ng-if="$ctrl.getFamilyTag(allele)">
                  <span>{{$ctrl.getFamilyTag(allele)}}</span>
              </div>
            </div>
            <div title="Homozygous" class="hom">
              <div class="hit" ng-if="$ctrl.isHomozygous(allele)">
                  <span>O</span>
              </div>
            </div>
            <div title="{{$ctrl.getQualityTextPopover(allele.id)}}" ng-class="$ctrl.getQualityClass(allele.id)">
              <div class="hit" ng-if="$ctrl.hasQualityInformation(allele)">
                <span>{{$ctrl.getQualityTag(allele)}}</span>
              </div>
            </div>
            <div class="important-source">
              <div title="Reference(s) available"  class="hit" ng-if="$ctrl.hasReferences(allele)">
                  <span>R</span>
              </div>
            </div>
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" class="cell classification id-classification">
          {{$ctrl.getClassificationText(allele.id)}}
        </div>
        <div ng-click="$ctrl.rowClicked(allele.id)" ng-if="!$ctrl.expanded" class="cell tab"
              title="{{$ctrl.isTogglable[allele.id] && $ctrl.readOnly ? 'Not allowed (read-only)' : ''}}">
          <div ng-if="$ctrl.isTogglable[allele.id]" class="added">
            <h5 ng-if="$ctrl.isToggled[allele.id]">-</h5>
            <h5 ng-if="!$ctrl.isToggled[allele.id]">+</h5>
          </div>
        </div>
        <div ng-if="$ctrl.expanded" class="cell">{{$ctrl.depth[allele.id]}}</div>
        <div ng-if="$ctrl.expanded" class="cell">{{$ctrl.alleleRatio[allele.id]}}</div>
        <div ng-if="$ctrl.expanded" class="cell">{{$ctrl.hiFreq[allele.id]}}</div>
        <div ng-if="$ctrl.expanded" class="cell">{{$ctrl.hiCount[allele.id]}}</div>
        <div ng-if="$ctrl.expanded" class="cell"><span ng-repeat="s in $ctrl.externalSummary[allele.id]">{{s}} </span></div>
        <div ng-if="$ctrl.expanded" class="cell"><input type="text"></div>
        <div ng-if="$ctrl.expanded" class="cell">
          <button class="purple" ng-click="$ctrl.quickClassificationClicked({classification: 'U', alleleId: allele.id})" ng-disabled="$ctrl.readOnly">Unclassified</button>
          <button class="purple" ng-click="$ctrl.quickClassificationClicked({classification: '2', alleleId: allele.id})" ng-disabled="$ctrl.readOnly">Class 2</button>
          <button class="purple" ng-click="$ctrl.quickClassificationClicked({code: {code: 'BS1', source: 'user'}, classification: '2', alleleId: allele.id})" ng-disabled="$ctrl.readOnly">BS1 (Cl.2)</button>
          <button class="purple" ng-click="$ctrl.quickClassificationClicked({code: {code: 'BS2', source: 'user'}, classification: '2', alleleId: allele.id})" ng-disabled="$ctrl.readOnly">BS2 (Cl.2)</button>
        </div>
    </div>
  </section>
